{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar webpack_1 = require(\"webpack\");\nfunction maybeFetchPlugin(compiler, name) {\n  var _a, _b;\n  return (_b = (_a = compiler.options) === null || _a === void 0 ? void 0 : _a.plugins) === null || _b === void 0 ? void 0 : _b.map(function (_ref) {\n    var constructor = _ref.constructor;\n    return constructor;\n  }).find(function (constructor) {\n    return constructor && constructor.name.endsWith(name);\n  });\n}\nvar ModifyJsonWebpackPlugin = function () {\n  function ModifyJsonWebpackPlugin() {\n    _classCallCheck(this, ModifyJsonWebpackPlugin);\n  }\n  _createClass(ModifyJsonWebpackPlugin, [{\n    key: \"modifyAsync\",\n    value: function () {\n      var _modifyAsync = _asyncToGenerator(function* (compiler, compilation, data) {\n        return data;\n      });\n      function modifyAsync(_x, _x2, _x3) {\n        return _modifyAsync.apply(this, arguments);\n      }\n      return modifyAsync;\n    }()\n  }, {\n    key: \"apply\",\n    value: function apply(compiler) {\n      var _this = this;\n      compiler.hooks.compilation.tap(this.constructor.name, function (compilation) {\n        compilation.hooks.processAssets.tapPromise({\n          name: _this.constructor.name,\n          stage: webpack_1.Compilation.PROCESS_ASSETS_STAGE_ADDITIONAL\n        }, _asyncToGenerator(function* () {\n          var JsonWebpackPlugin = maybeFetchPlugin(compiler, 'PwaManifestWebpackPlugin');\n          if (JsonWebpackPlugin) {\n            if (typeof JsonWebpackPlugin.getHooks === 'undefined') {\n              compilation.errors.push(new webpack_1.WebpackError('ModifyJsonWebpackPlugin - This ModifyJsonWebpackPlugin version is not compatible with your current JsonWebpackPlugin version.\\n'));\n              return;\n            }\n            JsonWebpackPlugin.getHooks(compilation).beforeEmit.tapAsync(_this.constructor.name, function () {\n              var _ref3 = _asyncToGenerator(function* (data, callback) {\n                try {\n                  data = yield _this.modifyAsync(compiler, compilation, data);\n                } catch (error) {\n                  compilation.errors.push(error);\n                }\n                callback(null, data);\n              });\n              return function (_x4, _x5) {\n                return _ref3.apply(this, arguments);\n              };\n            }());\n          }\n        }));\n      });\n    }\n  }]);\n  return ModifyJsonWebpackPlugin;\n}();\nexports.default = ModifyJsonWebpackPlugin;","map":{"version":3,"names":["webpack_1","require","maybeFetchPlugin","compiler","name","_b","_a","options","plugins","map","_ref","constructor","find","endsWith","ModifyJsonWebpackPlugin","_classCallCheck","_createClass","key","value","_modifyAsync","_asyncToGenerator","compilation","data","modifyAsync","_x","_x2","_x3","apply","arguments","_this","hooks","tap","processAssets","tapPromise","stage","Compilation","PROCESS_ASSETS_STAGE_ADDITIONAL","JsonWebpackPlugin","getHooks","errors","push","WebpackError","beforeEmit","tapAsync","_ref3","callback","error","_x4","_x5","exports","default"],"sources":["C:\\Users\\CR Laptop\\Desktop\\rn-project\\react_navigation\\node_modules\\@expo\\webpack-config\\src\\plugins\\ModifyJsonWebpackPlugin.ts"],"sourcesContent":["import { Compilation, Compiler, WebpackError, WebpackPluginInstance } from 'webpack';\n\nimport { BeforeEmitOptions } from './JsonWebpackPlugin';\n\nexport type Options = {\n  path: string;\n  json: any;\n  pretty?: boolean;\n};\n\nfunction maybeFetchPlugin(compiler: Compiler, name: string): WebpackPluginInstance | undefined {\n  return compiler.options?.plugins\n    ?.map(({ constructor }) => constructor)\n    .find(constructor => constructor && constructor.name.endsWith(name));\n}\n\nexport default class ModifyJsonWebpackPlugin {\n  async modifyAsync(\n    compiler: Compiler,\n    compilation: Compilation,\n    data: BeforeEmitOptions\n  ): Promise<BeforeEmitOptions> {\n    return data;\n  }\n\n  apply(compiler: Compiler) {\n    compiler.hooks.compilation.tap(this.constructor.name, (compilation: Compilation) => {\n      compilation.hooks.processAssets.tapPromise(\n        {\n          name: this.constructor.name,\n          // https://github.com/webpack/webpack/blob/master/lib/Compilation.js#L3280\n          stage: Compilation.PROCESS_ASSETS_STAGE_ADDITIONAL,\n        },\n        async () => {\n          // Hook into the html-webpack-plugin processing and add the html\n          const JsonWebpackPlugin = maybeFetchPlugin(compiler, 'PwaManifestWebpackPlugin') as any;\n          if (JsonWebpackPlugin) {\n            if (typeof JsonWebpackPlugin.getHooks === 'undefined') {\n              compilation.errors.push(\n                new WebpackError(\n                  'ModifyJsonWebpackPlugin - This ModifyJsonWebpackPlugin version is not compatible with your current JsonWebpackPlugin version.\\n'\n                )\n              );\n              return;\n            }\n\n            JsonWebpackPlugin.getHooks(compilation).beforeEmit.tapAsync(\n              this.constructor.name,\n              async (\n                data: BeforeEmitOptions,\n                callback: (error: Error | null, data: BeforeEmitOptions) => void\n              ) => {\n                try {\n                  data = await this.modifyAsync(compiler, compilation, data);\n                } catch (error: any) {\n                  compilation.errors.push(error);\n                }\n\n                callback(null, data);\n              }\n            );\n          }\n        }\n      );\n    });\n  }\n}\n"],"mappings":";;;;;;;;AAAA,IAAAA,SAAA,GAAAC,OAAA;AAUA,SAASC,gBAAgBA,CAACC,QAAkB,EAAEC,IAAY;;EACxD,OAAO,CAAAC,EAAA,IAAAC,EAAA,GAAAH,QAAQ,CAACI,OAAO,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,OAAO,cAAAH,EAAA,uBAAAA,EAAA,CAC5BI,GAAG,CAAC,UAAAC,IAAA;IAAA,IAAGC,WAAW,GAAAD,IAAA,CAAXC,WAAW;IAAA,OAAOA,WAAW;EAAA,GACrCC,IAAI,CAAC,UAAAD,WAAW;IAAA,OAAIA,WAAW,IAAIA,WAAW,CAACP,IAAI,CAACS,QAAQ,CAACT,IAAI,CAAC;EAAA,EAAC;AACxE;AAAC,IAEoBU,uBAAuB;EAAA,SAAAA,wBAAA;IAAAC,eAAA,OAAAD,uBAAA;EAAA;EAAAE,YAAA,CAAAF,uBAAA;IAAAG,GAAA;IAAAC,KAAA;MAAA,IAAAC,YAAA,GAAAC,iBAAA,CAC1C,WACEjB,QAAkB,EAClBkB,WAAwB,EACxBC,IAAuB;QAEvB,OAAOA,IAAI;MACb,CAAC;MAAA,SAAAC,YAAAC,EAAA,EAAAC,GAAA,EAAAC,GAAA;QAAA,OAAAP,YAAA,CAAAQ,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAL,WAAA;IAAA;EAAA;IAAAN,GAAA;IAAAC,KAAA,EAED,SAAAS,MAAMxB,QAAkB;MAAA,IAAA0B,KAAA;MACtB1B,QAAQ,CAAC2B,KAAK,CAACT,WAAW,CAACU,GAAG,CAAC,IAAI,CAACpB,WAAW,CAACP,IAAI,EAAE,UAACiB,WAAwB,EAAI;QACjFA,WAAW,CAACS,KAAK,CAACE,aAAa,CAACC,UAAU,CACxC;UACE7B,IAAI,EAAEyB,KAAI,CAAClB,WAAW,CAACP,IAAI;UAE3B8B,KAAK,EAAElC,SAAA,CAAAmC,WAAW,CAACC;SACpB,EAAAhB,iBAAA,CACD,aAAW;UAET,IAAMiB,iBAAiB,GAAGnC,gBAAgB,CAACC,QAAQ,EAAE,0BAA0B,CAAQ;UACvF,IAAIkC,iBAAiB,EAAE;YACrB,IAAI,OAAOA,iBAAiB,CAACC,QAAQ,KAAK,WAAW,EAAE;cACrDjB,WAAW,CAACkB,MAAM,CAACC,IAAI,CACrB,IAAIxC,SAAA,CAAAyC,YAAY,CACd,iIAAiI,CAClI,CACF;cACD;;YAGFJ,iBAAiB,CAACC,QAAQ,CAACjB,WAAW,CAAC,CAACqB,UAAU,CAACC,QAAQ,CACzDd,KAAI,CAAClB,WAAW,CAACP,IAAI;cAAA,IAAAwC,KAAA,GAAAxB,iBAAA,CACrB,WACEE,IAAuB,EACvBuB,QAAgE,EAC9D;gBACF,IAAI;kBACFvB,IAAI,SAASO,KAAI,CAACN,WAAW,CAACpB,QAAQ,EAAEkB,WAAW,EAAEC,IAAI,CAAC;iBAC3D,CAAC,OAAOwB,KAAU,EAAE;kBACnBzB,WAAW,CAACkB,MAAM,CAACC,IAAI,CAACM,KAAK,CAAC;;gBAGhCD,QAAQ,CAAC,IAAI,EAAEvB,IAAI,CAAC;cACtB,CAAC;cAAA,iBAAAyB,GAAA,EAAAC,GAAA;gBAAA,OAAAJ,KAAA,CAAAjB,KAAA,OAAAC,SAAA;cAAA;YAAA,IACF;;QAEL,CAAC,EACF;MACH,CAAC,CAAC;IACJ;EAAC;EAAA,OAAAd,uBAAA;AAAA;AAjDHmC,OAAA,CAAAC,OAAA,GAAApC,uBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}